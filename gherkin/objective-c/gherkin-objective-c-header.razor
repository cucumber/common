// ------------------------------------------------------------------------------
//  <auto-generated>
//      This code was generated by Berp (http://https://github.com/gasparnagy/berp/).
// 
//      Changes to this file may cause incorrect behavior and will be lost if
//      the code is regenerated.
//  </auto-generated>
// ------------------------------------------------------------------------------

@using Berp;

typedef enum    GHTokenType
{
    GHTokenTypeNone,
    @foreach(var rule in Model.RuleSet.TokenRules)
    {<text>        GHTokenType@(rule.Name.Replace("#", "")),
    </text>}
}               GHTokenType;

typedef enum    GHRuleType
{
    GHRuleTypeNone,
    @foreach(var rule in Model.RuleSet.Where(r => !r.TempRule))
    {<text>        GHRuleType@(rule.Name.Replace("#", "_")), // @rule.ToString(true)
    </text>}
}               GHRuleType;

#import "GHToken.h"
#import "GHParserException.h"

@@protocol GHAstBuilderProtocol <NSObject>

- (void)buildWithToken:(GHToken *)theToken;
- (void)startRuleWithType:(GHRuleType)theRuleType;
- (void)endRuleWithType:(GHRuleType)theRuleType;
- (id)result;
- (void)reset;

@@end

@@protocol GHTokenScannerProtocol <NSObject>

- (GHToken *)read;

@@end

@@protocol GHTokenMatcherProtocol <NSObject>

@foreach(var rule in Model.RuleSet.TokenRules)
{
@:- (BOOL)match@(rule.Name.Replace("#", ""))WithToken:(GHToken *)theToken;
}
- (void)reset;

@@end

#import "GHAstBuilder.h"
#import "GHTokenMatcher.h"
#import "GHParserException.h"

@@interface GHParserContext : NSObject

@@property (nonatomic, strong) id<GHTokenScannerProtocol>            tokenScanner;
@@property (nonatomic, strong) id<GHTokenMatcherProtocol>            tokenMatcher;
@@property (nonatomic, strong) NSMutableArray<GHToken *>             * tokenQueue;
@@property (nonatomic, strong) NSMutableArray<GHParserException *>   * errors;

@@end

@@interface GH@(Model.ParserClassName) : NSObject

@@property (nonatomic, assign) BOOL  stopAtFirstError;

- (id)initWithAstBuilder:(id<GHAstBuilderProtocol>)theAstBuilder;
- (id)parseWithTokenScanner:(id<GHTokenScannerProtocol>)theTokenScanner;
- (id)parseWithTokenScanner:(id<GHTokenScannerProtocol>)theTokenScanner tokenMatcher:(id<GHTokenMatcherProtocol>)theTokenMatcher;

@@end
